<html>

  <head>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css"/>
    <link rel="stylesheet" href="../MarkerCluster.css"/>
    <link rel="stylesheet" href="../MarkerCluster.Default.css"/>
    <link rel="stylesheet" href="../style.css"/>
 
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.ie.css" />
    <![endif]-->
    <script src="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.js"></script>
    <script src="../leaflet.markercluster-src.js"></script>

    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="map.js"></script>
    <!--link rel="points" type="application/json" href="./test.geojson"-->
    <link rel="day1" type="application/json" href="./day_1.geojson">
    <link rel="day2" type="application/json" href="./day_2.geojson">
    <link rel="day3" type="application/json" href="./day_3.geojson">
    <link rel="day4" type="application/json" href="./day_4.geojson">
    <link rel="day5" type="application/json" href="./day_5.geojson">

   

  </head>


  <title>
    TEST
  </title>

  <head>
    TEST GIT PAGE<br><br>
    

    <div id="map" style="height:80%;width:100%"></div>
    <div id="markerslist">
      <table></table>
    </div>

    <script>
      var map;
      initmap();

      function clickMarker(e) {
        var lat = e.latlng.lat + 0.03;
        var lng = e.latlng.lng;
        map.panTo({lat:lat, lng:lng});
      }
     


      function onEachFeature(feature, layer) {
        //does this feature have a property named popupContent?
        layer.bindPopup(feature.properties.popupContent, {
          minWidth: feature.properties.minWidth, 
          minHeight: feature.properties.minHeight,
        });
        //layer.on({click: clickMarker});
      }

      //var icon = 'http://dl.dropbox.com/s/vh7fr9sc9pobesk/marker_hole2.png';
      function pointToLayer(feature, latlng) { 
        return new L.marker(latlng, {
          icon: new L.NumberedDivIcon({number: feature.properties.count}),
        });
      }
 
      $.getJSON("./test.geojson", function (data) {
        var markers = new L.MarkerClusterGroup();
        var geojson = L.geoJson(data, {
          onEachFeature: onEachFeature,
          pointToLayer: pointToLayer
        });
        markers.addLayer(geojson);
        map.addLayer(markers);
      });

      var routeStyle = {
        "color": "#A01C1C",
        "weight": 5,
        "opacity": 0.65
      };

      $.getJSON($('link[rel="day1"]').attr("href"), function(data) {
        var day1 = L.geoJson(data, {style: routeStyle}).addTo(map);
      });

      $.getJSON($('link[rel="day2"]').attr("href"), function(data) {
        var day2 = L.geoJson(data, {style: routeStyle}).addTo(map);
      });

      $.getJSON($('link[rel="day3"]').attr("href"), function(data) {
        var day3 = L.geoJson(data, {style: routeStyle}).addTo(map);
      });

      $.getJSON($('link[rel="day4"]').attr("href"), function(data) {
        var day4 = L.geoJson(data, {style: routeStyle}).addTo(map);
      });

      $.getJSON($('link[rel="day5"]').attr("href"), function(data) {
        var day5 = L.geoJson(data, {style: routeStyle}).addTo(map);
      });






    </script>
  </head>

</html>
